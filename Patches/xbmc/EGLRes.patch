--- a/xbmc/windowing/egl/EGLNativeTypeRaspberryPI.cpp
+++ b/xbmc/windowing/egl/EGLNativeTypeRaspberryPI.cpp
@@ -24,6 +24,7 @@
 #include "utils/log.h"
 #include "guilib/gui3d.h"
 #include "linux/DllBCM.h"
+#include <fstream>
 
 #ifndef __VIDEOCORE4__
 #define __VIDEOCORE4__
@@ -97,8 +98,42 @@ void CEGLNativeTypeRaspberryPI::Initiali
   m_dispman_element2        = DISPMANX_NO_HANDLE;
   m_dispman_display         = DISPMANX_NO_HANDLE;
 
-  m_width                   = 1280;
-  m_height                  = 720;
+  m_width = 1280;
+  m_height = 720;
+    
+  std::ifstream file( "/home/xbian/.xbmc/userdata/advancedsettings.xml" ) ;
+  if (file.good()) {
+    std::string line, res;
+    int line_number = 0 ;
+    while( std::getline( file, line ) )
+    {
+        ++line_number ;
+        if( line.find("guires") != std::string::npos ) {
+            res = line;
+            res.erase(remove_if(res.begin(), res.end(), isspace), res.end());
+            break;
+        }
+    }
+    
+    if (res.compare("<guires>1080</guires>") == 0) {
+        CLog::Log(LOGDEBUG, "I found <guires>1080</guires>, using 1080p");
+        m_width = 1920;
+        m_height = 1080;
+    } else if (res.compare("<guires>540</guires>") == 0) {
+        CLog::Log(LOGDEBUG, "I found <guires>540</guires>, using 540p");
+        m_width = 960;
+        m_height = 540;
+    } else if (res.compare("<guires>480</guires>") == 0) {
+        CLog::Log(LOGDEBUG, "I found <guires>480</guires>, using 480p");
+        m_width = 853;
+        m_height = 480;
+    } else {
+        CLog::Log(LOGDEBUG, "I found <guires>720</guires> or no <guires></guires>, using 720p");
+        m_width = 1280;
+        m_height = 720;
+    }
+  }
+    
   m_initDesktopRes          = true;
 
   m_DllBcmHost = new DllBcmHost;
@@ -554,8 +589,42 @@ void CEGLNativeTypeRaspberryPI::Callback
 
 bool CEGLNativeTypeRaspberryPI::ClampToGUIDisplayLimits(int &width, int &height)
 {
-  const int max_width = 1280, max_height = 720;
-  float ar = (float)width/(float)height;
+  int max_width = 1280, max_height = 720;
+    
+    std::ifstream file( "/home/xbian/.xbmc/userdata/advancedsettings.xml" ) ;
+    if (file.good()) {
+        std::string line, res;
+        int line_number = 0 ;
+        while( std::getline( file, line ) )
+        {
+            ++line_number ;
+            if( line.find("guires") != std::string::npos ) {
+                res = line;
+                res.erase(remove_if(res.begin(), res.end(), isspace), res.end());
+                break;
+            }
+        }
+        
+        if (res.compare("<guires>1080</guires>") == 0) {
+            CLog::Log(LOGDEBUG, "I found <guires>1080</guires>, using 1080p");
+            max_width = 1920;
+            max_height = 1080;
+        } else if (res.compare("<guires>540</guires>") == 0) {
+            CLog::Log(LOGDEBUG, "I found <guires>540</guires>, using 540p");
+            max_width = 960;
+            max_height = 540;
+        } else if (res.compare("<guires>480</guires>") == 0) {
+            CLog::Log(LOGDEBUG, "I found <guires>480</guires>, using 480p");
+            max_width = 853;
+            max_height = 480;
+        } else {
+            CLog::Log(LOGDEBUG, "I found <guires>720</guires> or no <guires></guires>, using 720p");
+            max_width = 1280;
+            max_height = 720;
+        }
+    }
+    
+ float ar = (float)width/(float)height;
   // bigger than maximum, so need to clamp
   if (width > max_width || height > max_height) {
     // wider than max, so clamp width first
